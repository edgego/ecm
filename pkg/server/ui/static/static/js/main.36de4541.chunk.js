(window.webpackJsonpCloud2Here=window.webpackJsonpCloud2Here||[]).push([[0],{183:function(e,t,r){e.exports=r(426)},189:function(e,t,r){},190:function(e,t,r){},426:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(19),s=r.n(o),i=r(177),l=(r(188),r(14)),c=r(15),d=r(17),u=r(16),h=(r(189),r(190),function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){return a.a.createElement("footer",{className:"footer"},a.a.createElement("div",{className:"d-sm-flex justify-content-center justify-content-sm-between py-2"},a.a.createElement("span",{className:"text-muted text-center text-sm-left d-block d-sm-inline-block"},"Copyright \xa9 ",a.a.createElement("a",{href:"https://github.com/edgogo",target:"_blank",rel:"noopener noreferrer"},"EdgoGo IOT Tech "),"2022"),a.a.createElement("span",{className:"float-none float-sm-right d-block mt-1 mt-sm-0 text-center"},"Cloud Anywhere ",a.a.createElement("a",{href:"https://github.com/edgogo/",target:"_blank",rel:"noopener noreferrer"}," Edge Cloud console "),"  ")))}}]),r}(n.Component)),p=r(448),f=r(28),m=r(11),g=r(10),v=r(31),y=(r(263),r(264),r(51)),b=(r(276),r(444)),w=r(445),E=r(447),C=r(449),x=r(446),k=r(438),S=r(439),R=r(440),N=r(441),P=r(442),O=(r(118),r(32)),j=r.n(O),A=(r(119),r(443),r(120),function(e,t,r){return'<div class="trashIconBtn"><i class="fa fa-times" style="font-size: 20px;"></i></div>'}),L=r(44),T=r.n(L),I=r(30),_=r(23);function M(){M=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(R){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof u?t:u,o=Object.create(a.prototype),s=new x(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return S()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=w(s,r);if(i){if(i===d)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=c(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,s),o}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(R){return{type:"throw",arg:R}}}e.wrap=l;var d={};function u(){}function h(){}function p(){}var f={};i(f,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(k([])));g&&g!==t&&r.call(g,a)&&(f=g);var v=p.prototype=u.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function s(){return new t((function(n,s){!function n(a,o,s,i){var l=c(e[a],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(u).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,i)}))}i(l.arg)}(a,o,n,s)}))}return n=n?n.then(s,s):s()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=p,i(v,"constructor",p),i(p,"constructor",h),h.displayName=i(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(v),i(v,s,"Generator"),i(v,a,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var H=function(e,t,r){return"ipaddress"!==e.getField()||(T.a.isIP(t)||T.a.isFQDN(t))},D=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).nodeOptions={height:300,resizableColumns:!0,persistence:!1,selectable:0,layout:"fitColumns",locale:!0,langs:{"zh-cn":{columns:{cluster:"\u4e91"},pagination:{first:"\u9996\u9875",first_title:"\u9996\u9875",last:"\u6700\u540e\u9875",last_title:"\u6700\u540e\u9875",prev:"\u524d\u4e00\u9875",prev_title:"\u524d\u4e00\u9875",next:"\u4e0b\u4e00\u9875",next_title:"\u4e0b\u4e00\u9875",all:"\u5168\u90e8",page_size:"\u884c\u6570"},headerFilters:{default:"filter ...",columns:{ipaddress:"\u8fc7\u6ee4\u4e3b\u673a\u5730\u5740 ...",hostname:"\u8fc7\u6ee4\u4e3b\u673a\u540d\u79f0 ...",roles:"\u8fc7\u6ee4\u4e3b\u673a\u89d2\u8272 ...",status:"\u8fc7\u6ee4\u4e3b\u673a\u8fd0\u884c\u72b6\u6001 ..."}},custom:{worker:"\u5de5\u4f5c\u8282\u70b9",master:"\u63a7\u5236\u8282\u70b9",Ready:"\u5c31\u7eea",NotReady:"\u79bb\u7ebf"}},en:{custom:{worker:"worker",master:"master",Ready:"Ready",NotReady:"NotReady"}}}},n.nodeColumns=[{width:5,hozAlign:"center",formatter:"rownum",visible:!0,col:"blue"},{title:n.props.t("Node Address"),field:"ipaddress",formatter:"textarea",editor:"input",visible:!0,headerHozAlign:"center",hozAlign:"center",validator:[{type:H,parameters:{divisor:5}}],editorParams:{search:!0,selectContents:!0,elementAttributes:{maxlength:"30"}}},{title:n.props.t("Node Type"),field:"nodetype",hozAlign:"center",editor:"select",editorParams:{values:{master:n.props.t("master"),worker:n.props.t("worker")},defaultValue:"master"},visible:!0,headerHozAlign:"center",formatter:function(e,t,r){return"worker"===e.getValue()?e.getRow().getTable().getLang().custom.worker:e.getRow().getTable().getLang().custom.master}},{formatter:A,width:10,hozAlign:"center",cellClick:function(e,t){t.getRow().getTable().getDataCount()>1?t.getTable().deleteRow(t.getRow()):1===t.getRow().getTable().getDataCount()&&(t.getTable().deleteRow(t.getRow()),t.getTable().addRow({ipaddress:"0.0.0.0",nodetype:"master"}))}}],n.state={nodes:[{ipaddress:"0.0.0.0",nodetype:"master"}],cloudName:"",cloudRegion:"",sshPassword:"",sshUser:"root",sshPort:22,errorMessage:"",isMore:!1,boxHeight:"540px",moreIcon:"down",validated:!1,sshKeyPath:"~/.ssh/id_rsa",sshCertPath:"",sshPassphrase:"",sshAgentAuth:"Disable"},n.clusterVersionOptions=[{value:"Stable",label:"Stable"},{value:"Latest",label:"Latest"}],n.nodeTblRef=a.a.createRef(),n.cloudNameRef=a.a.createRef(),n.sshUserRef=a.a.createRef(),n.sshPasswordRef=a.a.createRef(),n.sshPortRef=a.a.createRef(),n.cloudFormRef=a.a.createRef(),n.clouldRegionRef=a.a.createRef(),n.sshKeyPathRef=a.a.createRef(),n.sshCertPathRef=a.a.createRef(),n.sshPassphraseRef=a.a.createRef(),n.sshAgentAuthRef=a.a.createRef(),n.handleCloudAddSubmit=n.handleCloudAddSubmit.bind(Object(m.a)(n)),n.handleClose=n.handleClose.bind(Object(m.a)(n)),n.handleAddNodeIP=n.handleAddNodeIP.bind(Object(m.a)(n)),n.handleCloudNameChange=n.handleCloudNameChange.bind(Object(m.a)(n)),n.handleSshAccountChange=n.handleSshAccountChange.bind(Object(m.a)(n)),n.handleSshPowordChange=n.handleSshPowordChange.bind(Object(m.a)(n)),n.handleSshPortChange=n.handleSshPortChange.bind(Object(m.a)(n)),n.setMoreSshInfo=n.setMoreSshInfo.bind(Object(m.a)(n)),n.handleSshkeyPathChange=n.handleSshkeyPathChange.bind(Object(m.a)(n)),n.handleSshCertPathChange=n.handleSshCertPathChange.bind(Object(m.a)(n)),n.handleSshPassphraseChange=n.handleSshPassphraseChange.bind(Object(m.a)(n)),n.handleSshAgentAuthChange=n.handleSshAgentAuthChange.bind(Object(m.a)(n)),n.handleCloudRegionChange=n.handleCloudRegionChange.bind(Object(m.a)(n)),n}return Object(c.a)(r,[{key:"handleSshkeyPathChange",value:function(e){e.persist();var t=e.target.value;this.setState((function(e){return{sshKeyPath:t}}))}},{key:"handleSshCertPathChange",value:function(e){e.persist();var t=e.target.value;this.setState((function(e){return{sshCertPath:t}}))}},{key:"handleCloudRegionChange",value:function(e){e.persist();var t=e.target.value;this.setState((function(e){return{cloudRegion:t}}))}},{key:"handleSshPassphraseChange",value:function(e){e.persist();var t=e.target.value;this.setState((function(e){return{sshPassphrase:t}}))}},{key:"handleSshAgentAuthChange",value:function(e){e.persist();var t=e.target.value;this.setState((function(e){return{sshAgentAuth:t}}))}},{key:"setMoreSshInfo",value:function(){!0===this.state.isMore?this.setState((function(e){return{isMore:!1,boxHeight:"540px",moreIcon:"down"}})):this.setState((function(e){return{isMore:!0,boxHeight:"730px",moreIcon:"up"}}))}},{key:"pingHost",value:function(){var e=Object(f.a)(M().mark((function e(t,r,n){var a;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.next=3,fetch("/cluster/ping/"+r+"/"+t,{method:"POST",mode:"no-cors",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.text():Promise.reject()})).then((function(e){"OK"===e&&(a=!0)})).catch((function(e){console.error("There was an error!",e)}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(){this.props.handleClose(),this.setState((function(e){return{nodes:[{ipaddress:"0.0.0.0",nodetype:"master"}],cloudName:"",sshPassword:"",cloudRegion:"",sshUser:"root",sshPort:22,isMore:!1,moreIcon:"down",validated:!1}}))}},{key:"handleCloudAddSubmit",value:function(){var e=Object(f.a)(M().mark((function e(){var t,r,n,a,o,s,i,l,c,d,u,h,p,f=this;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState((function(e){return{validated:!0}})),void 0!==this.state.cloudName&&""!==this.state.cloudName){e.next=4;break}return this.cloudNameRef.current.focus(),e.abrupt("return");case 4:if(void 0!==this.state.cloudRegion&&""!==this.state.cloudRegion){e.next=7;break}return this.clouldRegionRef.current.focus(),e.abrupt("return");case 7:if(void 0!==this.state.sshUser&&""!==this.state.sshUser){e.next=10;break}return this.sshUserRef.current.focus(),e.abrupt("return");case 10:if(!1!==this.state.isMore){e.next=14;break}if(void 0!==this.state.sshPassword&&""!==this.state.sshPassword||!1!==this.state.isMore){e.next=14;break}return this.sshPasswordRef.current.focus(),e.abrupt("return");case 14:if(!0!==this.state.isMore){e.next=21;break}if(void 0!==this.state.sshKeyPath&&""!==this.state.sshKeyPath){e.next=18;break}return this.sshKeyPathRef.current.focus(),e.abrupt("return");case 18:if(void 0!==this.state.sshPort&&""!==this.state.sshPort){e.next=21;break}return this.sshPortRef.current.focus(),e.abrupt("return");case 21:for(t=[],r=[],n=this.nodeTblRef.current.table.getData(),a=[],o=0;o<n.length;o++)void 0!==n[o].ipaddress&&""!==n[o].ipaddress&&"0.0.0.0"!==n[o].ipaddress&&""!==n[o].ipaddress&&a.push(n[o]);for(s=0;s<a.length;s++)"master"===a[s].nodetype?t.push(a[s].ipaddress):r.push(a[s].ipaddress);if(0!=t.length||0!=r.length){e.next=30;break}return this.handleClose(),e.abrupt("return");case 30:if(i={},i=""!==this.state.sshPassword?{"ssh-port":this.state.sshPort+"","ssh-user":this.state.sshUser,"ssh-password":this.state.sshPassword,"ssh-agent-auth":"Disable"!==this.state.sshAgentAuth}:{"ssh-port":this.state.sshPort+"","ssh-user":this.state.sshUser,"ssh-key-path":this.state.sshKeyPath,"ssh-cert-path":this.state.sshCertPath,"ssh-key-passphrase":this.state.sshPassphrase,"ssh-agent-auth":"Disable"!==this.state.sshAgentAuth},l="",!1,!(t.length>0)){e.next=49;break}c=0;case 36:if(!(c<t.length)){e.next=47;break}return l=c!==t.length-1?l+t[c]+",":l+t[c]+"",e.next=40,this.pingHost(t[c],this.state.cloudName,i);case 40:if(!1!==e.sent){e.next=44;break}return _.a.error({description:this.props.t("Host ")+t[c]+this.props.t(" not reachable,Please check host address,account and password if correct"),duration:10,placement:"topRight"}),e.abrupt("return");case 44:c++,e.next=36;break;case 47:e.next=51;break;case 49:return _.a.info({description:this.props.t("At least set one master node to cloud"),duration:10,placement:"topRight"}),e.abrupt("return");case 51:if(d="",!(r.length>0)){e.next=65;break}u=0;case 54:if(!(u<r.length)){e.next=65;break}return d=u!==r.length-1?d+r[u]+",":d+r[u]+"",e.next=58,this.pingHost(r[u],this.state.cloudName,i);case 58:if(!1!==e.sent){e.next=62;break}return _.a.error({description:this.props.t("Host ")+r[u]+this.props.t(" not reachable,Please check host address,account and password if correct"),duration:10,placement:"topRight"}),e.abrupt("return");case 62:u++,e.next=54;break;case 65:return h={id:this.state.cloudName,name:this.state.cloudName,region:this.state.cloudRegion,master:t.length+"",worker:r.length+"","context-name":this.state.cloudName,"ssh-port":this.state.sshPort+"","ssh-user":this.state.sshUser,"ssh-password":this.state.sshPassword,"ssh-key-path":""!==this.state.sshPassword?"":this.state.sshKeyPath,"ssh-cert-path":""!==this.state.sshPassword?"":this.state.sshCertPath,"ssh-key-passphrase":""!==this.state.sshPassword?"":this.state.sshPassphrase,"ssh-agent-auth":"Disable"!==this.state.sshAgentAuth,options:{"master-ips":l,"worker-ips":d},provider:"native",type:"cluster","cluster-cidr":"10.42.0.0/16","k3s-channel":"stable",enable:["dashboard"],"k3s-install-script":"http://rancher-mirror.cnrancher.com/k3s/k3s-install.sh","k3s-install-mirror":"INSTALL_K3S_MIRROR=cn","docker-script":"https://get.docker.com | bash -s docker --mirror Aliyun",cluster:!0},p=this.state.cloudName,this.handleClose(),this.props.handleProcessingBegin(),e.next=71,fetch("/cluster/"+p,{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json"}}).then((function(e){return e.text()})).then((function(e){"OK"===e?_.a.success({description:f.props.t("Succeed to create cloud!"),duration:10,placement:"topRight"}):_.a.error({description:f.props.t("Failed to create cloud!"),duration:10,placement:"topRight"})})).catch((function(e){console.error("There was an error!",e.toString())}));case 71:this.props.handleProcessingEnd(),this.setState((function(e){return{nodes:[{ipaddress:"0.0.0.0",nodetype:"master"}]}}));case 73:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAddNodeIP",value:function(){this.nodeTblRef.current.table.addRow({ipaddress:"0.0.0.0",nodetype:"master"})}},{key:"handleCloudNameChange",value:function(e){e.persist();var t=e.target.value;this.setState((function(e){return{cloudName:t}}))}},{key:"handleSshAccountChange",value:function(e){e.persist();var t=e.target.value;this.setState((function(e){return{sshUser:t}}))}},{key:"handleSshPowordChange",value:function(e){e.persist();var t=e.target.value;this.setState((function(e){return{sshPassword:t}}))}},{key:"handleSshPortChange",value:function(e){e.persist();var t=e.target.value;this.setState((function(e){return{sshPort:t}}))}},{key:"render",value:function(){var e=this;return!1===this.props.show?null:a.a.createElement("div",null,a.a.createElement(j.a,{size:"large",onClose:this.props.handleClose,disableOverlayClick:!0},a.a.createElement(j.a.Header,null,a.a.createElement(j.a.Title,null,this.props.t("Add Cloud"))),a.a.createElement(j.a.Body,{padding:!0},a.a.createElement(I.a,{ref:this.cloudFormRef,noValidate:!0,validated:this.state.validated},a.a.createElement(g.Grid,{fluid:!0},a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:4,md:2},this.props.t("Cloud Name"),a.a.createElement("font",{color:"red"},"*")),a.a.createElement(g.Col,{xs:20,md:10},a.a.createElement("input",{required:!0,type:"text",className:"form-control",placeholder:this.props.t("Cloud Name"),value:this.state.cloudName,ref:this.cloudNameRef,pattern:"[a-zA-Z0-9]{8}",onChange:function(t){return e.handleCloudNameChange(t)}}),a.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.props.t("Please input cloud name")))),a.a.createElement("p",null),a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:4,md:2},this.props.t("Region"),a.a.createElement("font",{color:"red"},"*")),a.a.createElement(g.Col,{xs:20,md:10},a.a.createElement("input",{required:!0,type:"text",className:"form-control",placeholder:this.props.t("Region"),value:this.state.cloudRegion,ref:this.clouldRegionRef,onChange:function(t){return e.handleCloudRegionChange(t)}}),a.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.props.t("Please input cloud region")))),a.a.createElement("p",null),a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:4,md:2},this.props.t("Node Account"),a.a.createElement("font",{color:"red"},"*")),a.a.createElement(g.Col,{xs:20,md:10},a.a.createElement("input",{required:!0,type:"text",className:"form-control",placeholder:this.props.t("SSH Account Name"),value:this.state.sshUser,ref:this.sshUserRef,onChange:function(t){return e.handleSshAccountChange(t)}}),a.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.props.t("Please Input SSH Account Name")))),a.a.createElement("p",null),!1===this.state.isMore?a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:4,md:2},this.props.t("Node Password"),"  ",!1===this.state.isMore?a.a.createElement("font",{color:"red"},"*"):null),a.a.createElement(g.Col,{xs:20,md:10},a.a.createElement("input",{required:!this.state.isMore,type:"password",className:"form-control",placeholder:this.props.t("SSH Account Password"),value:this.state.sshPassword,ref:this.sshPasswordRef,onChange:function(t){return e.handleSshPowordChange(t)}}),a.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.props.t("Please Input SSH Account Password")," "))):null,a.a.createElement("p",null),a.a.createElement(g.Row,{end:"xs"},a.a.createElement(g.Col,{xs:24,md:12,align:"right"},a.a.createElement(v.b,{icon:this.state.moreIcon,type:"light",onClick:this.setMoreSshInfo}))),a.a.createElement("p",null),!0===this.state.isMore?a.a.createElement("div",null,a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:4,md:2},a.a.createElement(I.a.Label,null,this.props.t("SSH Key Path"),!0===this.state.isMore?a.a.createElement("font",{color:"red"},"*"):null)),a.a.createElement(g.Col,{xs:20,md:10},a.a.createElement("input",{type:"input",className:"form-control",placeholder:this.props.t("SSH private key path"),required:!0,value:this.state.sshKeyPath,ref:this.sshKeyPathRef,onChange:function(t){return e.handleSshkeyPathChange(t)}}),a.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.props.t("Please input SSH private key path")))),a.a.createElement("p",null),a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:4,md:2},a.a.createElement(I.a.Label,null,this.props.t("SSH Cert Path"))),a.a.createElement(g.Col,{xs:20,md:10},a.a.createElement("input",{type:"input",className:"form-control",placeholder:this.props.t("SSH private key certificate path"),value:this.state.sshCertPath,onChange:function(t){return e.handleSshCertPathChange(t)},ref:this.sshCertPathRef}),a.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.props.t("Please input SSH private key certificate path")))),a.a.createElement("p",null),a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:4,md:2},a.a.createElement(I.a.Label,null,this.props.t("SSH Key Passphrase"))),a.a.createElement(g.Col,{xs:20,md:10},a.a.createElement("input",{type:"input",className:"form-control",placeholder:this.props.t("SSH Key Passphrase"),value:this.state.sshPassphrase,ref:this.sshPassphraseRef,onChange:function(t){return e.handleSshPassphraseChange(t)}}))),a.a.createElement("p",null),a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:4,md:2},a.a.createElement(I.a.Label,null,this.props.t("SSH Agent Auth"))),a.a.createElement(g.Col,{xs:20,md:10},a.a.createElement(I.a.Control,{as:"select",className:"form-control",placeholder:this.props.t("SSH Agent Auth"),value:this.state.sshAgentAuth,ref:this.sshAgentAuthRef,onChange:function(t){return e.handleSshAgentAuthChange(t)}},a.a.createElement("option",{value:"Disable"},this.props.t("Disable")),a.a.createElement("option",{value:"Enable"},this.props.t("Enable"))))),a.a.createElement("p",null),a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:4,md:2},this.props.t("Node Port")," ",!0===this.state.isMore?a.a.createElement("font",{color:"red"},"*"):null),a.a.createElement(g.Col,{xs:20,md:10},a.a.createElement("input",{placeholder:"Node ssh Port number",type:"number",min:22,max:49999,className:"form-control",value:this.state.sshPort,ref:this.sshPortRef,onChange:function(t){return e.handleSshPortChange(t)}})))):null,a.a.createElement("p",null),a.a.createElement(g.Row,{end:"xs"},a.a.createElement(g.Col,{xs:24,md:12,align:"right"},a.a.createElement("div",{className:"addIconBtn"},a.a.createElement("i",{className:"fa fa-plus",title:this.props.t("Add Node"),"aria-hidden":"true",onClick:function(){return e.handleAddNodeIP()}}," ")))),a.a.createElement("p",null),a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:4,md:2},this.props.t("Nodes"),a.a.createElement("font",{color:"red"},"*")),a.a.createElement(g.Col,{xs:20,md:10},a.a.createElement(y.ReactTabulator,{ref:this.nodeTblRef,columns:this.nodeColumns,data:this.state.nodes,options:this.nodeOptions})))))),a.a.createElement(j.a.Footer,null,a.a.createElement(v.b,{onClick:this.handleClose},this.props.t("Cancel")),a.a.createElement(v.b,{onClick:this.handleCloudAddSubmit},this.props.t("Submit")))))}}]),r}(a.a.Component),F=Object(p.a)()(D),z=(r(369),r(156)),G=r.n(z),V=r(157),B=r.n(V),K=r(74),U=r.n(K);r(421);function Y(){Y=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(R){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof u?t:u,o=Object.create(a.prototype),s=new x(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return S()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=w(s,r);if(i){if(i===d)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=c(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,s),o}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(R){return{type:"throw",arg:R}}}e.wrap=l;var d={};function u(){}function h(){}function p(){}var f={};i(f,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(k([])));g&&g!==t&&r.call(g,a)&&(f=g);var v=p.prototype=u.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function s(){return new t((function(n,s){!function n(a,o,s,i){var l=c(e[a],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(u).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,i)}))}i(l.arg)}(a,o,n,s)}))}return n=n?n.then(s,s):s()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=p,i(v,"constructor",p),i(p,"constructor",h),h.displayName=i(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(v),i(v,s,"Generator"),i(v,a,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var q=function(e,t,r){return"ipaddress"!==e.getField()||(T.a.isURL(t)||T.a.isIP(t)||T.a.isFQDN(t))},J=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).nodeOptions={height:380,resizableColumns:!0,persistence:!1,selectable:0,layout:"fitColumns",locale:!0,langs:{"zh-cn":{columns:{cluster:"\u4e91"},pagination:{first:"\u9996\u9875",first_title:"\u9996\u9875",last:"\u6700\u540e\u9875",last_title:"\u6700\u540e\u9875",prev:"\u524d\u4e00\u9875",prev_title:"\u524d\u4e00\u9875",next:"\u4e0b\u4e00\u9875",next_title:"\u4e0b\u4e00\u9875",all:"\u5168\u90e8",page_size:"\u884c\u6570"},headerFilters:{default:"filter ...",columns:{ipaddress:"\u8fc7\u6ee4\u4e3b\u673a\u5730\u5740 ...",hostname:"\u8fc7\u6ee4\u4e3b\u673a\u540d\u79f0 ...",roles:"\u8fc7\u6ee4\u4e3b\u673a\u89d2\u8272 ...",status:"\u8fc7\u6ee4\u4e3b\u673a\u8fd0\u884c\u72b6\u6001 ..."}},custom:{worker:"\u5de5\u4f5c\u8282\u70b9",master:"\u63a7\u5236\u8282\u70b9",Ready:"\u5c31\u7eea",NotReady:"\u79bb\u7ebf"}},en:{custom:{worker:"worker",master:"master",Ready:"Ready",NotReady:"NotReady"}}}},n.nodeColumns=[{width:5,hozAlign:"center",formatter:"rownum",visible:!0,col:"blue"},{title:n.props.t("Node Address"),field:"ipaddress",formatter:"textarea",hozAlign:"center",editor:"input",visible:!0,headerHozAlign:"center",validator:[{type:q,parameters:{divisor:5}}]},{title:n.props.t("Node Type"),field:"nodetype",hozAlign:"center",editor:"select",editorParams:{values:{master:n.props.t("master"),worker:n.props.t("worker")}},visible:!0,headerHozAlign:"center",formatter:function(e,t,r){return"worker"===e.getValue()?e.getRow().getTable().getLang().custom.worker:e.getRow().getTable().getLang().custom.master}},{formatter:A,width:10,hozAlign:"center",cellClick:function(e,t){t.getRow().getTable().getDataCount()>1?t.getTable().deleteRow(t.getRow()):1===t.getRow().getTable().getDataCount()&&(t.getTable().deleteRow(t.getRow()),t.getTable().addRow({ipaddress:"0.0.0.0",nodetype:"master"}))}}],n.state={nodes:[{ipaddress:"0.0.0.0",nodetype:"master"}],errorMessage:""},n.clusterVersionOptions=[{value:"Stable",label:"Stable"},{value:"Latest",label:"Latest"}],n.nodeTblRef=a.a.createRef(),n.cloudNameRef=a.a.createRef(),n.handleAddNodesSubmit=n.handleAddNodesSubmit.bind(Object(m.a)(n)),n.handleAddNodeIP=n.handleAddNodeIP.bind(Object(m.a)(n)),n}return Object(c.a)(r,[{key:"pingHost",value:function(){var e=Object(f.a)(Y().mark((function e(t,r){var n;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.next=3,fetch("/cluster/ping/"+t+"/"+r,{method:"POST",mode:"no-cors",body:JSON.stringify("{}"),headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.text():Promise.reject()})).then((function(e){"OK"===e&&(n=!0)})).catch((function(e){console.error("There was an error!",e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"handleAddNodesSubmit",value:function(){var e=Object(f.a)(Y().mark((function e(){var t,r,n,a,o,s,i,l,c,d,u,h,p,f=this;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.props.cloudName,r=this.props.cloudId,n=[],a=[],o=this.nodeTblRef.current.table.getData(),s=[],i=0;i<o.length;i++)void 0!==o[i].ipaddress&&""!==o[i].ipaddress&&"0.0.0.0"!==o[i].ipaddress&&s.push(o[i]);for(l=0;l<s.length;l++)"master"===s[l].nodetype?n.push(s[l].ipaddress):a.push(s[l].ipaddress);if(0!=n.length||0!=a.length){e.next=11;break}return this.props.handleClose(),e.abrupt("return");case 11:if(!1,c='{ "id" : "'+r+'" , "name": "'+t+'", "provider": "native","options":{"master-ips": ',d="",!(n.length>0)){e.next=30;break}d='"',u=0;case 17:if(!(u<n.length)){e.next=28;break}return d=u!==n.length-1?d+n[u]+",":d+n[u]+'",',e.next=21,this.pingHost(r,n[u]);case 21:if(!1!==e.sent){e.next=25;break}return _.a.error({description:this.props.t("Host ")+n[u]+this.props.t(" not reachable,Please check host address,account and password if correct"),duration:10,placement:"topRight"}),e.abrupt("return");case 25:u++,e.next=17;break;case 28:e.next=31;break;case 30:d='"",';case 31:if(c=c+d+'"worker-ips": ',h="",!(a.length>0)){e.next=49;break}h='"',p=0;case 36:if(!(p<a.length)){e.next=47;break}return h=p!==a.length-1?h+a[p]+",":h+a[p]+'"',e.next=40,this.pingHost(r,a[p]);case 40:if(!1!==e.sent){e.next=44;break}return _.a.error({description:this.props.t("Host ")+a[p]+this.props.t(" not reachable,Please check host address,account and password if correct"),duration:10,placement:"topRight"}),e.abrupt("return");case 44:p++,e.next=36;break;case 47:e.next=50;break;case 49:h='""';case 50:return c=c+h+" }}",this.props.handleClose(),this.props.handleProcessingBegin(),e.next=55,fetch("/cluster/join/"+t,{method:"POST",body:c,headers:{"Content-Type":"application/json"}}).then((function(e){return e.text()})).then((function(e){"OK"===e?(f.props.handleProcessingEnd(),_.a.success({description:f.props.t("Succeed to join cloud"),duration:10,placement:"topRight"})):(f.props.handleProcessingEnd(),_.a.error({description:f.props.t("failed to join cloud,error:")+e,duration:10,placement:"topRight"}))})).catch((function(e){f.props.handleProcessingEnd(),_.a.error({description:f.props.t("failed to join cloud,error:")+e.toString(),duration:10,placement:"topRight"})}));case 55:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAddNodeIP",value:function(){this.nodeTblRef.current.table.addRow({ipaddress:"0.0.0.0",nodetype:"master"})}},{key:"render",value:function(){var e=this;return!1===this.props.show?null:a.a.createElement("div",null,a.a.createElement(j.a,{size:"sm",onClose:this.props.handleClose,disableOverlayClick:!0},a.a.createElement(j.a.Header,null,a.a.createElement(j.a.Title,null,this.props.t("Add Node"))),a.a.createElement(j.a.Body,{padding:!0},a.a.createElement(E.a,{height:"440px"},a.a.createElement(g.Grid,{fluid:!0},a.a.createElement("p",null),a.a.createElement(g.Row,{end:"xs"},a.a.createElement(g.Col,{xs:24,md:12,align:"right"},a.a.createElement("div",{className:"addIconBtn"},a.a.createElement("i",{className:"fa fa-plus",title:this.props.t("Add Node"),"aria-hidden":"true",onClick:function(){return e.handleAddNodeIP()}}," ")))),a.a.createElement("p",null),a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:24,md:12},a.a.createElement(y.ReactTabulator,{className:"border-light",ref:this.nodeTblRef,columns:this.nodeColumns,data:this.state.nodes,options:this.nodeOptions})))))),a.a.createElement(j.a.Footer,null,a.a.createElement(v.b,{onClick:this.props.handleClose},this.props.t("Cancel")),a.a.createElement(v.b,{onClick:this.handleAddNodesSubmit},this.props.t("Submit")))))}}]),r}(a.a.Component),W=Object(p.a)()(J),Q=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"spinner-wrapper"},a.a.createElement("div",{className:"donut"})))}}]),r}(n.Component);function Z(){Z=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(R){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof u?t:u,o=Object.create(a.prototype),s=new x(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return S()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=w(s,r);if(i){if(i===d)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=c(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,s),o}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(R){return{type:"throw",arg:R}}}e.wrap=l;var d={};function u(){}function h(){}function p(){}var f={};i(f,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(k([])));g&&g!==t&&r.call(g,a)&&(f=g);var v=p.prototype=u.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function s(){return new t((function(n,s){!function n(a,o,s,i){var l=c(e[a],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(u).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,i)}))}i(l.arg)}(a,o,n,s)}))}return n=n?n.then(s,s):s()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=p,i(v,"constructor",p),i(p,"constructor",h),h.displayName=i(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(v),i(v,s,"Generator"),i(v,a,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}var $=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).rowEvents={onClick:function(e,t,r){n.provider=t.provider,n.cloudName=t.name,n.cloudId=t.id,n.selectedNode=null}},n.nodeOptions={resizableColumns:!0,persistence:!1,resizableRows:!0,selectable:1,layout:"fitColumns",locale:!0,langs:{"zh-cn":{columns:{cluster:"\u4e91"},pagination:{first:"\u9996\u9875",first_title:"\u9996\u9875",last:"\u6700\u540e\u9875",last_title:"\u6700\u540e\u9875",prev:"\u524d\u4e00\u9875",prev_title:"\u524d\u4e00\u9875",next:"\u4e0b\u4e00\u9875",next_title:"\u4e0b\u4e00\u9875",all:"\u5168\u90e8",page_size:"\u884c\u6570"},headerFilters:{default:"filter ...",columns:{ipaddress:"\u8fc7\u6ee4\u4e3b\u673a\u5730\u5740 ...",hostname:"\u8fc7\u6ee4\u4e3b\u673a\u540d\u79f0 ...",roles:"\u8fc7\u6ee4\u4e3b\u673a\u89d2\u8272 ...",status:"\u8fc7\u6ee4\u4e3b\u673a\u8fd0\u884c\u72b6\u6001 ..."}},custom:{worker:"\u5de5\u4f5c\u8282\u70b9",master:"\u63a7\u5236\u8282\u70b9",Ready:"\u5c31\u7eea",NotReady:"\u79bb\u7ebf"}},en:{custom:{worker:"worker",master:"master",Ready:"Ready",NotReady:"NotReady"}}},rowFormatter:function(e,t){t=e.getData();console.log(t.status),"Ready"===t.status&&(e.getElement().style.foregroundColor="#1e3b20")}},n.nodeColumns=[{formatter:"rowSelection",width:5,titleFormatter:"rowSelection",hozAlign:"center",headerSort:!1,cellClick:function(e,t){t.getRow().toggleSelect()}},{width:5,hozAlign:"center",formatter:"rownum",visible:!0},{title:n.props.t("Cluster"),field:"cluster",formatter:"textarea",visible:!1,headerHozAlign:"center",hozAlign:"center"},{title:n.props.t("IP Address"),field:"ipaddress",formatter:"textarea",visible:!0,headerHozAlign:"center",hozAlign:"center",headerFilter:"input"},{title:n.props.t("Host Name"),field:"hostname",formatter:"textarea",visible:!0,headerHozAlign:"center",hozAlign:"center",headerFilter:"input"},{title:n.props.t("Container Runtime"),field:"containerRuntimeVersion",formatter:"textarea",visible:!0,headerHozAlign:"center",hozAlign:"center"},{title:n.props.t("Roles"),field:"roles",visible:!0,headerHozAlign:"center",hozAlign:"center",formatter:function(e,t,r){return"worker"===e.getValue()?e.getRow().getTable().getLang().custom.worker:(e.getElement().style.fontWeight="bold",e.getRow().getTable().getLang().custom.master)}},{title:n.props.t("Status"),field:"status",visible:!0,headerHozAlign:"center",hozAlign:"center",formatter:function(e,t,r){return"Ready"===e.getValue()?(e.getElement().style.color="green",e.getRow().getTable().getLang().custom.Ready):(e.getElement().style.color="#f00",e.getRow().getTable().getLang().custom.NotReady)}}],n.state={cloudModalVisible:!1,nodeModalVisible:!1,nodeRoles:[{}],workerIPs:[{}],portNumber:22,clouds:[{}],processing:!1,confirmDelete:!1,deleteTitle:n.props.t("Delete Cloud")},n.cloudNodesMap=null,n.selectedCloudNodes=[],n.provider="native",n.cloudName="",n.cloudId="",n.cloudIP="",n.selectedNode=null,n.defaultSorted=[{dataField:"name",order:"asc"}],n.cloudVersionSelectRef=a.a.createRef(),n.nodeTblRef=a.a.createRef(),n.cloudTblRef=a.a.createRef(),n.handleAddCloud=n.handleAddCloud.bind(Object(m.a)(n)),n.handleDeleteNode=n.handleDeleteNode.bind(Object(m.a)(n)),n.handleDeleteCloud=n.handleDeleteCloud.bind(Object(m.a)(n)),n.nodeRowSelected=n.nodeRowSelected.bind(Object(m.a)(n)),n.nodeRowDeSelected=n.nodeRowDeSelected.bind(Object(m.a)(n)),n.hideCloudModal=n.hideCloudModal.bind(Object(m.a)(n)),n.showCloudModal=n.showCloudModal.bind(Object(m.a)(n)),n.showNodeModal=n.showNodeModal.bind(Object(m.a)(n)),n.hideNodeModal=n.hideNodeModal.bind(Object(m.a)(n)),n.handleProcessingBegin=n.handleProcessingBegin.bind(Object(m.a)(n)),n.handleProcessingEnd=n.handleProcessingEnd.bind(Object(m.a)(n)),n.handleAddNode=n.handleAddNode.bind(Object(m.a)(n)),n.handleExpandCluster=n.handleExpandCluster.bind(Object(m.a)(n)),n.handleRefreshClouds=n.handleRefreshClouds.bind(Object(m.a)(n)),n.handleOpenCloudSetting=n.handleOpenCloudSetting.bind(Object(m.a)(n)),n.handleDeleteConfirm=n.handleDeleteConfirm.bind(Object(m.a)(n)),n.handleDeleteCancel=n.handleDeleteCancel.bind(Object(m.a)(n)),n.selectRow={mode:"radio",clickToSelect:!0,clickToExpand:!0,style:{backgroundColor:"#c8e6c9"},classes:"selection-row",hideSelectAll:!0,onSelect:function(e,t,r,a){n.selectedNode=null,t&&(n.provider=e.provider,n.cloudName=e.name,n.cloudId=e.id,n.selectedNode=null)}},n.expandRow={renderer:function(e){return a.a.createElement("div",null,a.a.createElement(g.Grid,{fluid:!0},a.a.createElement(g.Col,{xs:24,md:12,align:"right"},"Running"===e.status||"Updating"===e.status?a.a.createElement(b.a,null,a.a.createElement(w.a,{plain:!0,content:a.a.createElement(E.a,{align:"center",background:"black",margin:"xsmall",pad:"xsmall",round:"xsmall",flex:!1},a.a.createElement(C.a,{color:"white"},n.props.t("Cloud Console")))},a.a.createElement(x.a,{disabled:!1,alignSelf:"end",onClick:function(){return n.handleOpenCloudSetting()},icon:a.a.createElement(k.a,{color:"RoyalBlue",szie:"small"}),hoverIndicator:!0})),a.a.createElement(w.a,{plain:!0,content:a.a.createElement(E.a,{align:"center",background:"black",margin:"xsmall",pad:"xsmall",round:"xsmall",flex:!1},a.a.createElement(C.a,{color:"white"},n.props.t("Add Node")))},a.a.createElement(x.a,{disabled:!1,alignSelf:"end",onClick:function(){return n.handleAddNode()},icon:a.a.createElement(S.a,{color:"RoyalBlue",szie:"small"}),hoverIndicator:!0})),a.a.createElement(w.a,{plain:!0,content:a.a.createElement(E.a,{align:"center",background:"black",margin:"xsmall",pad:"xsmall",round:"xsmall",flex:!1},a.a.createElement(C.a,{color:"white"},n.props.t("Delete Node")))},a.a.createElement(x.a,{disabled:!1,alignSelf:"end",onClick:function(){return n.handleDeleteNode()},icon:a.a.createElement(R.a,{color:"red",szie:"small"}),hoverIndicator:!0}))):null),a.a.createElement("div",null,a.a.createElement(v.a,{isOpen:n.state.confirmDelete,type:"danger",title:n.props.t(n.state.deleteTitle),confirmText:n.props.t("Confirm"),cancelText:n.props.t("Cancel"),maskClosable:!0,hasBackdrop:!1,onCancel:n.handleDeleteCancel,onConfirm:n.handleDeleteConfirm,content:n.props.t("Are you sure to delete this? If deleted would not recover it!")})),a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:24,md:12},a.a.createElement(v.c,{title:a.a.createElement("font",{size:"3"}," ",n.props.t("Nodes")),style:{},noHover:!0},a.a.createElement("div",null,a.a.createElement(W,{show:n.state.nodeModalVisible,cloudName:e.id,cloudId:e.name,handleProcessingBegin:n.handleProcessingBegin,handleProcessingEnd:n.handleProcessingEnd,handleClose:n.hideNodeModal}),a.a.createElement(y.ReactTabulator,{ref:n.nodeTblRef,rowDeselected:n.nodeRowDeSelected,rowSelected:n.nodeRowSelected,columns:n.nodeColumns,data:n.selectedCloudNodes,options:n.nodeOptions})))))))},onExpand:n.handleExpandCluster,showExpandColumn:!0,onlyOneExpanding:!0,expandHeaderColumnRenderer:function(e){return e.isAnyExpands?a.a.createElement("b",null," \u2207 "):a.a.createElement("b",null,"  \u25b7 ")},expandColumnRenderer:function(e){return e.expanded?a.a.createElement("b",null," \u2207 "):a.a.createElement("b",null,"  \u25b7 ")}},n.nodeTblColumns=[{dataField:"name",sort:!0,filter:Object(K.textFilter)(),searchable:!0,headerStyle:{"font-size":"normal","font-weight":"bold"},text:n.props.t("Cloud Name")},{dataField:"status",sort:!0,headerStyle:{"font-size":"normal","font-weight":"bold"},text:n.props.t("Status"),formatter:n.statusFormatter},{dataField:"version",headerStyle:{"font-size":"normal","font-weight":"bold"},text:n.props.t("Version")},{dataField:"master",sort:!0,headerStyle:{"font-size":"normal","font-weight":"bold"},text:n.props.t("Master Nodes")},{dataField:"worker",sort:!0,headerStyle:{"font-size":"normal","font-weight":"bold"},text:n.props.t("Worker Nodes")},{dataField:"region",sort:!1,searchable:!0,headerStyle:{"font-size":"normal","font-weight":"bold"},filter:Object(K.textFilter)(),text:n.props.t("Region")},{dataField:"updated-at",sort:!0,headerStyle:{"font-size":"normal","font-weight":"bold"},formatter:n.dateTimeFormatter,text:n.props.t("Updated Time")}],n}return Object(c.a)(r,[{key:"dateTimeFormatter",value:function(e,t,r,n){return void 0!==e?new Date(e/1e6).toLocaleString():""}},{key:"statusFormatter",value:function(e,t,r,n){var o=e;if("zh-CN"===navigator.language)switch(e){case"Running":o=a.a.createElement("font",{color:"green"},"\u8fd0\u884c\u4e2d...");break;case"Stopped":o=a.a.createElement("font",{color:"red"},"\u505c\u6b62");break;case"Creating":o=a.a.createElement("font",{color:"blue"},"\u521b\u5efa\u4e2d...");break;case"Missing":o=a.a.createElement("font",{color:"red"},"\u4e22\u5931");break;case"Failed":o=a.a.createElement("font",{color:"red"},"\u5931\u8d25");break;case"Upgrading":o=a.a.createElement("font",{color:"blue"},"\u5347\u7ea7\u4e2d...");break;case"Removing":o=a.a.createElement("font",{color:"blue"},"\u5220\u9664\u4e2d...");break;case"Updating":o=a.a.createElement("font",{color:"blue"},"\u66f4\u65b0\u4e2d...")}else switch(e){case"Running":o=a.a.createElement("font",{color:"green"},e);break;case"Stopped":o=a.a.createElement("font",{color:"red"},e);break;case"Creating":o=a.a.createElement("font",{color:"blue"},e);break;case"Missing":case"Failed":o=a.a.createElement("font",{color:"red"},e);break;case"Upgrading":case"Removing":case"Updating":o=a.a.createElement("font",{color:"blue"},e)}return o}},{key:"handleOpenCloudSetting",value:function(){void 0!==this.cloudIP&&null!==this.cloudIP&&""!==this.cloudIP&&window.open("http://"+this.cloudIP+":30008")}},{key:"handleDeleteCancel",value:function(e){this.setState((function(e){return{confirmDelete:!1}}))}},{key:"handleDeleteConfirm",value:function(){var e=Object(f.a)(Z().mark((function e(t){var r,n,a,o,s=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=(r=this.selectedNode)&&null!==r){e.next=7;break}return e.next=4,fetch("/cluster/"+this.cloudName+"/provider/"+this.provider,{method:"delete"}).then((function(e){return e.ok?e.text():Promise.reject()})).then((function(e){"OK"===e&&function(){for(var e=s.state.clouds.slice(),t=0;t<e.length;t++)if(e[t].id==s.cloudName){e.splice(t,1),s.setState((function(t){return{clouds:e}}));break}}(),_.a.success({description:s.props.t("Succeed to delete cloud!"),duration:10,placement:"topRight"})})).catch((function(e){_.a.error({description:s.props.t("Failed to delete cloud!"),duration:10,placement:"topRight"})}));case 4:this.setState((function(e){return{confirmDelete:!1}})),e.next=12;break;case 7:return n=r.getData().ipaddress,a=n.replaceAll(".","-"),o="/cluster/"+r.getData().cluster+"/node/"+r.getData().hostname+"/instance/"+a,e.next=12,fetch(o,{method:"delete"}).then((function(e){return e.ok?e.text():Promise.reject()})).then((function(e){"OK"===e&&(r.delete(),_.a.success({description:s.props.t("Succeed to delete node!"),duration:10,placement:"topRight"}))})).catch((function(e){_.a.error({description:s.props.t("Failed to delete node!"),duration:10,placement:"topRight"}),console.error("There was an error!",e)}));case 12:return this.setState((function(e){return{confirmDelete:!1}})),e.next=15,this.loadCloudMetadata();case 15:this.cloudNodesMap=e.sent;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleProcessingBegin",value:function(){this.setState((function(e){return{processing:!0}}))}},{key:"loadCloudMetadata",value:function(){var e=Object(f.a)(Z().mark((function e(){var t,r,n,a,o,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Map,r=[],e.next=4,fetch("/clusters/native",{method:"GET",mode:"no-cors",headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(r=e.sent,!n.ok){e.next=24;break}if(void 0===r||null===r){e.next=24;break}a=0;case 11:if(!(a<r.length)){e.next=22;break}return e.next=14,fetch("/cluster/"+r[a].id+"/nodes",{method:"GET",mode:"no-cors",headers:{"Content-Type":"application/json"}});case 14:return o=e.sent,e.next=17,o.json();case 17:s=e.sent,o.ok&&t.set(r[a].id,s);case 19:a++,e.next=11;break;case 22:return this.setState((function(e){return{clouds:r}})),e.abrupt("return",t);case 24:return e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleProcessingEnd",value:function(){var e=Object(f.a)(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadCloudMetadata();case 2:this.cloudNodesMap=e.sent,this.setState((function(e){return{processing:!1}})),this.selectedNode=null;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleExpandCluster",value:function(e,t,r,n){if(t){var a=this.cloudNodesMap.get(e.id),o=null;void 0!==a&&null!==a&&(o=a.nodes);var s="";if(void 0!==o&&null!==o){for(var i=[],l=0;l<o.length;l++){var c=o[l]["instance-id"].replaceAll("-","."),d=o[l].roles;if(void 0!==d){var u=d.match("master");null===u?u="worker":s=c,i.push({cluster:e.name,ipaddress:c,nodetype:u,hostname:o[l].hostname,containerRuntimeVersion:o[l].containerRuntimeVersion,roles:u,status:o[l].status})}else i.push({cluster:e.name,ipaddress:c,nodetype:"",hostname:o[l].hostname,containerRuntimeVersion:o[l].containerRuntimeVersion,roles:"",status:o[l].status})}this.selectedCloudNodes=i,this.cloudIP=s,this.provider=e.provider,this.cloudName=e.name,this.cloudId=e.cloudId}}else this.selectedNode=null,this.cloudName="",this.cloudId="",this.cloudIP="",this.selectedNode=null}},{key:"handleRefreshClouds",value:function(){var e=Object(f.a)(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState((function(e){return{processing:!0}})),e.next=3,this.loadCloudMetadata();case 3:this.cloudNodesMap=e.sent,this.selectedNode=null,this.setState((function(e){return{processing:!1}}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAddCloud",value:function(){this.showCloudModal()}},{key:"handleDeleteNode",value:function(){var e=this;void 0!==this.selectedNode&&null!==this.selectedNode&&this.setState((function(t){return{confirmDelete:!0,deleteTitle:e.props.t("Delete Node")}}))}},{key:"handleDeleteCloud",value:function(){var e=this;void 0!==this.cloudName&&""!==this.cloudName&&this.setState((function(t){return{confirmDelete:!0,deleteTitle:e.props.t("Delete Cloud")}}))}},{key:"showNodeModal",value:function(){this.setState((function(e){return{nodeModalVisible:!0}}))}},{key:"hideNodeModal",value:function(){var e=Object(f.a)(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState((function(e){return{nodeModalVisible:!1}}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showCloudModal",value:function(){this.setState((function(e){return{cloudModalVisible:!0}}))}},{key:"hideCloudModal",value:function(){this.setState((function(e){return{cloudModalVisible:!1}}))}},{key:"handleAddNode",value:function(){this.showNodeModal()}},{key:"componentDidMount",value:function(){var e=Object(f.a)(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState((function(e){return{processing:!0}})),e.next=3,this.loadCloudMetadata();case 3:this.cloudNodesMap=e.sent,this.setState((function(e){return{processing:!1}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nodeRowSelected",value:function(){var e=Object(f.a)(Z().mark((function e(t){var r=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.selectedNode=t,this.setState((function(e){return{deleteTitle:r.props.t("Delete Node")}}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nodeRowDeSelected",value:function(e){var t=this;this.setState((function(e){return{deleteTitle:t.props.t("Delete Cloud")}})),this.selectedNode=null}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(v.c,{title:a.a.createElement("font",{size:"3",color:"RoyalBlue"}," ",this.props.t("Edge Cloud Center")),style:{height:1200},noHover:!0},a.a.createElement(g.Grid,{fluid:!0},a.a.createElement(g.Row,{end:"xs"},a.a.createElement(g.Col,{xs:24,md:12,align:"right"},a.a.createElement(b.a,null,a.a.createElement(w.a,{plain:!0,content:a.a.createElement(E.a,{align:"center",background:"black",margin:"xsmall",pad:"xsmall",round:"xsmall",flex:!1},a.a.createElement(C.a,{color:"white"},this.props.t("Add Cloud")))},a.a.createElement(x.a,{disabled:!1,alignSelf:"end",onClick:function(){return e.handleAddCloud()},icon:a.a.createElement(N.a,{color:"RoyalBlue"}),hoverIndicator:!0})),a.a.createElement(w.a,{plain:!0,content:a.a.createElement(E.a,{align:"center",background:"black",margin:"xsmall",pad:"xsmall",round:"xsmall",flex:!1},a.a.createElement(C.a,{color:"white"},this.props.t("Delete Cloud")))},a.a.createElement(x.a,{disabled:!1,alignSelf:"end",onClick:function(){return e.handleDeleteCloud()},icon:a.a.createElement(R.a,{color:"red"}),hoverIndicator:!0})),a.a.createElement(w.a,{plain:!0,content:a.a.createElement(E.a,{align:"center",background:"black",margin:"xsmall",pad:"xsmall",round:"xsmall",flex:!1},a.a.createElement(C.a,{color:"white"},this.props.t("Refresh Clouds")))},a.a.createElement(x.a,{disabled:!1,alignSelf:"end",onClick:function(){return e.handleRefreshClouds()},icon:a.a.createElement(P.a,{color:"RoyalBlue"}),hoverIndicator:!0})))),a.a.createElement(g.Col,{xs:4,md:2,align:"right"})),a.a.createElement("p",null),this.state.processing?a.a.createElement("div",null,a.a.createElement(Q,null)):null,a.a.createElement(F,{show:this.state.cloudModalVisible,nodes:this.state.nodes,handleProcessingBegin:this.handleProcessingBegin,handleProcessingEnd:this.handleProcessingEnd,handleClose:this.hideCloudModal}),a.a.createElement(g.Row,null,a.a.createElement(g.Col,{xs:24,md:12},a.a.createElement("div",null,a.a.createElement(G.a,{bordered:!1,key:this.state.cloudId,defaultSorted:this.defaultSorted,selectRow:this.selectRow,filter:U()(),filterPosition:"top",keyField:"id",rowEvents:this.rowEvents,data:this.state.clouds,columns:this.nodeTblColumns,expandRow:this.expandRow,pagination:B()({pageStartIndex:1,sizePerPage:30,hideSizePerPage:!0,hidePageListOnlyOnePage:!1})})))),a.a.createElement("p",null))))}}]),r}(n.Component),X=Object(p.a)()($),ee=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(c.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.isFullPageLayout?"":a.a.createElement(h,null);return a.a.createElement("div",null,a.a.createElement(X,null),e)}},{key:"componentDidUpdate",value:function(e){}}]),r}(n.Component),te=Object(p.a)()(ee),re=r(105),ne=r(67),ae=r(178);re.a.use(ae.a).use(ne.e).init({resources:{en:{translations:{"Overview dashboard":"Overview dashboard"}},zh:{translations:{Core:"\u6838\u5fc3","Add Cloud":" \u65b0\u5efa\u4e91",Cluster:"\u4e91","Cloud Name":"\u540d\u79f0",Status:"\u8fd0\u884c\u72b6\u6001",Version:"\u8fd0\u884c\u7248\u672c","Master Nodes":"\u63a7\u5236\u8282\u70b9\u6570","Worker Nodes":"\u5de5\u4f5c\u8282\u70b9\u6570","Refresh Clouds":"\u5237\u65b0","Edge Cloud Center":"\u8fb9\u7f18\u4e91\u63a7\u5236\u4e2d\u5fc3","Cloud Console":"\u4e91\u63a7\u5236\u53f0","Add Node":"\u589e\u52a0\u8282\u70b9",Delete:"\u5220\u9664","Are you sure to delete this? If deleted would not recover it!":"\u786e\u5b9a\u8981\u5220\u9664,\u5982\u679c\u786e\u5b9a\u5220\u9664\u5c06\u65e0\u6cd5\u6062\u590d?",Confirm:"\u786e\u5b9a",Cancel:"\u53d6\u6d88","Delete Cloud":"\u5220\u9664\u4e91","Delete Node":"\u5220\u9664\u8282\u70b9","Succeed to delete node!":"\u6210\u529f\u5220\u9664\u8282\u70b9","Failed to delete node!":"\u5220\u9664\u8282\u70b9\u5931\u8d25","Succeed to delete cloud!":"\u5220\u9664\u8fb9\u7f18\u4e91\u6210\u529f!","Failed to delete cloud!":"\u5220\u9664\u8fb9\u7f18\u4e91\u5931\u8d25!","IP Address":"\u4e3b\u673a\u5730\u5740","Host Name":"\u4e3b\u673a\u540d","Container Runtime":"\u5bb9\u5668\u7248\u672c",Roles:"\u89d2\u8272",Region:"\u533a\u57df","Node Account":"\u8282\u70b9\u8d26\u53f7","Node Password":"\u8282\u70b9\u5bc6\u7801","SSH Account Password":"\u8282\u70b9\u5bc6\u7801",More:"\u66f4\u591a",Less:"\u51cf\u5c11",Nodes:"\u8282\u70b9","SSH Key Path":"SSH\u79c1\u94a5\u8def\u5f84","SSH Cert Path":"SSH\u79c1\u94a5\u8ba4\u8bc1\u8def\u5f84","SSH Key Passphrase":"SSH\u79c1\u94a5\u5bc6\u7801","SSH Agent Auth":" SSH\u4ee3\u7406\u8ba4\u8bc1","Node Port":"\u8282\u70b9\u7aef\u53e3",Submit:"\u63d0\u4ea4","Please input cloud name":"\u8f93\u5165\u540d\u79f0","Please Input SSH Account Name":"\u8f93\u5165\u8d26\u53f7\u540d\u79f0","Node Address":"\u8282\u70b9\u4e3b\u673a","Node Type":"\u8282\u70b9\u7c7b\u578b","Please Input SSH Account Password":"\u8f93\u5165\u8d26\u53f7\u767b\u5f55\u5bc6\u7801","Please input SSH private key path":"\u8f93\u5165SSH\u79c1\u6709\u5bc6\u94a5\u6587\u4ef6\u8def\u5f84","SSH private key certificate path":"\u8f93\u5165SSH\u79c1\u6709\u5bc6\u94a5\u8ba4\u8bc1\u6587\u4ef6\u8def\u5f84","Host ":"\u4e3b\u673a : "," not reachable,Please check host address,account and password if correct":" \u4e0d\u80fd\u591f\u8bbf\u95ee\uff0c\u8bf7\u68c0\u67e5\u4e3b\u673a\u5730\u5740\uff0c\u8d26\u53f7\uff0c\u5bc6\u7801\u662f\u5426\u6b63\u786e","Succeed to join cloud":"\u52a0\u5165\u4e91\u6210\u529f\uff01","failed to join cloud,error:":"\u52a0\u5165\u8fb9\u7f18\u4e91\u5931\u8d25\uff0c\u9519\u8bef: ","Succeed to create cloud!":"\u521b\u5efa\u8fb9\u7f18\u4e91\u6210\u529f!","Failed to create cloud!":"\u521b\u5efa\u8fb9\u7f18\u4e91\u5931\u8d25!","Updated Time":"\u66f4\u6539\u65f6\u95f4","Please input cloud region":"\u8f93\u5165\u8fb9\u7f18\u4e91\u6240\u5728\u533a\u57df","At least set one master node to cloud":"\u81f3\u5c11\u9700\u8981\u4e00\u4e2a\u4e3b\u63a7\u5236\u8282\u70b9",worker:"\u5de5\u4f5c\u8282\u70b9",master:" \u63a7\u5236\u8282\u70b9",Disable:"\u7981\u7528",Enable:"\u542f\u7528",Running:"\u8fd0\u884c\u4e2d..."}}},ns:["translations"],defaultNS:"translations",keySeparator:!1,interpolation:{escapeValue:!1},detection:{order:["navigator"]}});re.a,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(i.a,{basename:"/cloud"},a.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[183,1,2]]]);
//# sourceMappingURL=main.36de4541.chunk.js.map